name: Main Workflow

on:
  push:
    branches:
      - main

jobs:
  run-tests:
    uses: kirandevops1993/VS-TEST-REUSABLE/.github/workflows/VStest-reusable.yml@main
    with:
      dotnet-version: "6.0.x"  # Ensure this matches your .NET project
      vsTestVersion: "16.0"
      testAssembly: "**/*Tests.dll"  # Ensures all test assemblies are discovered
      testFilterCriteria: "TestCategory=Unit"
      runSettingsFile: "test.runsettings"
      codeCoverageEnabled: true
      pathToCustomTestAdapters: ""
      overrideTestRunParameters: ""
      publishRunAttachments: true
      runInParallel: true
      testRunTitle: "Unit Tests"
      platform: "x64"
      configuration: "Release"
      otherConsoleOptions: "/logger:trx"
